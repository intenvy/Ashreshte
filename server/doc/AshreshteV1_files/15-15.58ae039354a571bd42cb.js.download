(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{2959:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EditorModeApi=void 0;var a=P(r(0)),n=P(r(16)),o=P(r(38)),i=P(r(2995)),l=v(r(104)),s=v(r(7)),u=P(r(17)),d=r(2),c=P(r(20)),f=r(4),p=P(r(2986)),g=P(r(34)),m=P(r(2987)),h=P(r(2977)),b=P(r(3));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function P(e){return e&&e.__esModule?e:{default:e}}class E extends a.default.Component{constructor(){super(),this.ensureApi();var e=s.getCurrentMatch();this.listener=f.Route.sub("params").addListener(t=>{var r=!b.default.is(t.getPreviousValue(),t.getCurrentValue()),a=!l.hasLoaded();e===s.getCurrentMatch()&&(r||a)&&this.ensureApi()})}componentWillUnmount(){this.listener&&f.Route.sub("params").removeListener(this.listener)}ensureApi(){var{groupId:e,artifactId:t,versionId:r,view:a}=s.getParams();r?this.selectApi(e,t,r,a):o.default.getMeta(e,t).then(r=>{var{defaultVersion:a}=r;u.default.go("/api/".concat(e,"/").concat(t,"/").concat(a))})}selectApi(e,t,r,a){o.default.select(...arguments).then(()=>{var{versionId:e}=s.getParams()}).catch(()=>{c.default.debug("No such version, ".concat(e,"/").concat(t,"/").concat(r))})}renderNoApiFound(){if("failed"!==f.SelectApiInProgress.get("status"))return null;var e=f.SelectApiInProgress;return a.default.createElement("div",{className:"no-api-found-msg"},a.default.createElement("h3",null," Sorry, we can't find ",a.default.createElement("b",null," ",e.get("owner")," / ",e.get("id")," / ",e.get("version")," ")),a.default.createElement(d.Link,{to:"/"},"Go back home"))}render(){var e=null;(0,g.default)("ui.showCluster")&&(e={top:72});var t=null;return h.default.isSupportedBrowser()&&(t=a.default.createElement("div",null,a.default.createElement(i.default,null),a.default.createElement(p.default,null),this.renderNoApiFound())),a.default.createElement("div",{style:e,className:"main-page api-main"},a.default.createElement(m.default,null),t)}}t.EditorModeApi=E;var A=(0,n.default)(E,[f.SelectApiInProgress]);t.default=A},2995:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Apibar=void 0;var a=g(r(0)),n=g(r(16)),o=r(4),i=g(r(2996)),l=g(r(2982)),s=g(r(2983)),u=g(r(2984)),d=g(r(2985)),c=g(r(81)),f=g(r(186)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}(r(19));function g(e){return e&&e.__esModule?e:{default:e}}class m extends a.default.Component{render(){if(p.showLoadingSpinner())return a.default.createElement(c.default,{loading:!0,label:"Loading API"});var e=f.default.getCurrentVersionProps().Swagger;return a.default.createElement("div",{id:"apibar"},a.default.createElement("div",{className:"apibar-dropdowns"},a.default.createElement(l.default,null),a.default.createElement(u.default,null),a.default.createElement(s.default,null)),a.default.createElement("div",{className:"apibar-menu"},a.default.createElement(i.default,{binding:o.CurrentApi,url:e}),a.default.createElement(d.default,null)))}}t.Apibar=m;var h=(0,n.default)(m,[o.SelectApiInProgress,o.CurrentApi,o.CurrentDomain]);t.default=h},2996:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=x(r(0)),n=x(r(57)),o=x(r(4)),i=x(r(183)),l=x(r(9)),s=x(r(18)),u=x(r(15)),d=x(r(17)),c=x(r(41)),f=x(r(38)),p=x(r(440)),g=x(r(87)),m=x(r(113)),h=x(r(238)),b=x(r(609)),v=k(r(104)),P=k(r(29)),E=k(r(5)),A=k(r(7)),I=k(r(19)),y=k(r(10)),O=k(r(43)),w=x(r(2972)),C=x(r(2981)),M=x(r(1031)),S=r(2),D=r(47),j=x(r(163)),V=k(r(37)),_=k(r(6)),N=r(83);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=(0,n.default)({displayName:"ApiActionsMenu",mixins:[b.default,h.default,m.default],observedBindings:[o.default.Codegen,o.default.CurrentSpec.sub("apisJson"),o.default.Organizations.sub("current")],componentDidMount(){p.default.ensureAllLangList();var{name:e,owner:t}=I.details();f.default.getMeta(t,e),void 0===V.available(V.API_VERSIONS,t)&&(this.isEditor()||P.hasAtLeastComment())&&j.default.getLimits(t)},showCollaboration(){this.isEditor()?s.default.show("collaborators",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){L(e,t,r[t])}))}return e}({},A.objectId(),{url:A.getFullUrl(),hasOwnership:!0,isSpecPrivate:I.apisJsonIsPrivate(),source:"Editor Page"})):u.default.error("You must be logged in to manage collaboration for this API","Manage Collaborators")},addApiVersion(){s.default.show("addApiVersion")},bumpApiVersion(){s.default.show("bumpVersion")},editApiInfo(){s.default.show("editApiMeta");var e=this.getDefaultBinding(),t=e.get("groupId"),r=e.get("artifactId");f.default.getMeta.triggerAsync(t,r).catch(e=>{u.default.error(e,"Edit Information")})},editGitHubPush(){this.requireSave(()=>{var e=this.getDefaultBinding(),t=e.get("groupId"),r=e.get("artifactId"),a=e.get("versionId");s.default.show("editGitHubPush"),f.default.getGitHubPush.triggerAsync(t,r,a).then(()=>{}).catch(e=>{u.default.error(e,"Edit GitHub Push")})},"to edit GitHub Push")},editCodegenOptions(e){s.default.show("editCodegenOptions",{oas:e})},deleteVersion(){1==this.getDefaultBinding().get("versions").count()?u.default.error("An API has to have at least one version","Delete Version"):this.isCurrentVersionPublished()?u.default.error("Unable to delete published versions","Delete Version"):c.default.confirm({msg:"Are you sure you want to delete this version of the API definition?",title:"Delete Version",callback:()=>this.doDeleteVersion()})},doDeleteVersion(){var e=this.getDefaultBinding(),t=e.get().toJS();f.default.deleteVersion.triggerAsync(t.groupId,t.artifactId,t.versionId).then(()=>{var r=e.get("versions").find(e=>i.default.getApiVersion(e.toJS())!=t.versionId),a=r?i.default.getApiVersion(r.toJS()):null;d.default.go("/api/".concat(t.groupId,"/").concat(t.artifactId).concat(r?"/".concat(a):"")),f.default.select(t.groupId,t.artifactId,a)}).catch(e=>{u.default.error(e,"Delete Version")})},togglePublish(){this.isCurrentVersionPublished()?this.requireEditor(()=>{s.default.show("togglePublished")},"to unpublish it"):this.requireCollaborator("edit",()=>{this.requireSave(()=>{s.default.show("togglePublished")},"to publish")},"to publish it")},isCurrentVersionPublished:()=>o.default.CurrentApi.get("published"),handleReset(){var e=O.getEditorMode()||"",t=O.getEditContextInFocus();g.default.setAllowEditorCtxReload(!0),(0,N.preserveCurrentContext)(e,t),f.default.reset(),(0,_.default)({common:{label:"Selected Reset Changes",appContext:"Editor Page",pageContext:"Main Toolbar/API Options Dropdown",component:"Reset Changes Menu Item",custom:{"Definition Type":"API"}}})},getPermissions:()=>({isOwner:P.isOwner(),isConsumer:y.userIsConsumer(E.getUsername()),isEditor:P.hasAtLeastEdit()&&!P.isBlocked(),isLoggedIn:E.isLoggedIn()}),selectTemplate(e,t){var r;try{r=v.json()}catch(e){return void u.default.error("Cannot generate with invalid YAML/JSON, please resolve any syntax issues in the spec first")}p.default.generate(e,t,r).then(e=>{var{blob:t,filename:r}=e;w.default.saveAs(t,r)}).catch(e=>{/4../.test(e.response.status)?e.response.json().then(e=>{u.default.error({body:e})}):/5../.test(e.response.status)?u.default.error("There was an error generating the ".concat(e.target," ").concat(e.template," code. Please ensure that the definition and all external refs (inc. domains) are valid.")):u.default.error(e)})},mergeSpec(){s.default.show("selectToCompareAndMerge")},render(){var e=o.default.CurrentApi,t=this.getPermissions(),r=e.get("notificationStatus"),n=e.get("groupId"),i=e.get("artifactId"),s=!I.isBlocked(),{url:u}=this.props,d=o.default.CurrentApiMetadata.get("defaultVersion");return a.default.createElement("div",{className:"api-actions-menu"},a.default.createElement(C.default,null),a.default.createElement(D.ButtonGroup,{className:"api-action-btns"},t.isEditor&&!t.isConsumer&&s?a.default.createElement(S.OverlayTrigger,{placement:"bottom",overlay:a.default.createElement(S.Tooltip,{className:"api-actions-menu-icons"},"API Options"),rootClose:!0},a.default.createElement(S.DropdownButton,{id:"api-configure-menu",bsStyle:"link",noCaret:!0,title:a.default.createElement(l.default,{icon:"circle icon-cog"}),pullRight:!0},a.default.createElement(S.MenuItem,{onSelect:()=>{this.editGitHubPush(),(0,_.default)({common:{label:"Selected Edit Github Push",appContext:"Editor Page",pageContext:"Main Toolbar/API Options Dropdown",component:"Edit GitHub Push Menu Item",custom:{"Definition Type":I.isDomain()?"Domain":"API"}}})}},"Edit GitHub Push"),a.default.createElement(S.MenuItem,{divider:!0}),a.default.createElement(S.MenuItem,{onSelect:this.handleReset},"Reset Changes"))):null,d?a.default.createElement("div",{className:"btn-group btn-group-link"},a.default.createElement("div",{className:"button-link btn btn-link notifications-btn"},a.default.createElement(M.default,{notificationStatus:r,groupId:n,projectId:i,id:u,type:"apis",origin:"apis",tractEvent:{common:{label:"Toggled Notifactions",appContext:"Editor Page",pageContext:"Main Toolbar",component:"Bell-Alt Icon",custom:{"Definition Type":"API","Desired State":r?"Off":"On"}}}}))):null,t.isEditor&&s?a.default.createElement(S.OverlayTrigger,{placement:"bottom",overlay:a.default.createElement(S.Tooltip,{className:"api-actions-menu-icons"},"Share & Collaborate")},a.default.createElement(S.Button,{className:"sh-btn button-link btn btn-link notifications-btn",pullRight:!0,onClick:()=>{this.showCollaboration(),(0,_.default)((0,_.SelectedShareAndCollaborate)())}},a.default.createElement(l.default,{icon:"circle icon-share-alt-solid"}))):null))}});t.default=T,e.exports=t.default}}]);